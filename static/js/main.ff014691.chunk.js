(this["webpackJsonptask-tracker-with-imgs"]=this["webpackJsonptask-tracker-with-imgs"]||[]).push([[0],{34:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var c={};n.r(c),n.d(c,"addCard",(function(){return A})),n.d(c,"moveCard",(function(){return D}));var r=n(0),a=n(12),o=n.n(a),i=(n(34),n(5)),s=n(6),u=n(4),l=n(29),d=n(1),j=["onClick","text"],b=function(e){var t=e.onClick,n=e.text,c=Object(l.a)(e,j);return Object(d.jsx)("button",Object(u.a)(Object(u.a)({className:"button",type:"button",onClick:t},c),{},{children:n}))},O=function(e){var t=e.saveChanges;return Object(d.jsxs)("header",{className:"header",children:[Object(d.jsx)("h1",{children:"Task Tracker"}),Object(d.jsx)(b,{onClick:t,text:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"})]})},m=n(7),f=function(e){var t=e.onClickOpenSelect;return Object(d.jsx)("span",{onClick:t,children:Object(d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 0.292908L13.3536 3.64646L12.6465 4.35357L10.5 2.20712V9.50001H17.7929L15.6465 7.35357L16.3536 6.64646L19.7071 10L16.3536 13.3536L15.6465 12.6465L17.7929 10.5H10.5V17.7929L12.6465 15.6465L13.3536 16.3536L10 19.7071L6.64646 16.3536L7.35357 15.6465L9.50001 17.7929V10.5H2.20712L4.35357 12.6465L3.64646 13.3536L0.292908 10L3.64646 6.64646L4.35357 7.35357L2.20712 9.50001H9.50001V2.20712L7.35357 4.35357L6.64646 3.64646L10 0.292908Z",fill:"black"})})})},h=function(e){var t=e.column,n=e.onChooseColumn,c=e.onSetColumn,r=e.closeSelect;return Object(d.jsxs)("form",{className:"card_mover",children:[Object(d.jsxs)("select",{name:"type",value:t,onChange:c,children:[Object(d.jsx)("option",{value:"",disabled:!0,children:"\u041a\u0443\u0434\u0430 \u043f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c?"}),Object(d.jsx)("option",{value:"todo",children:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c"}),Object(d.jsx)("option",{value:"inprogress",children:"\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435"}),Object(d.jsx)("option",{value:"done",children:"\u0421\u0434\u0435\u043b\u0430\u043d\u043e"})]}),Object(d.jsx)(b,{onClick:n,text:"Ok"}),Object(d.jsx)(b,{onClick:r,text:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})},p=function(e){var t=e.card,n=e.moveCard,c=t.url,a=t.name,o=t.description,s=t.column,u=t.id,l=Object(r.useState)(!1),j=Object(i.a)(l,2),b=j[0],O=j[1],m=Object(r.useState)(s),p=Object(i.a)(m,2),x=p[0],v=p[1],C=function(){O(!1)};return Object(d.jsxs)("article",{className:"card",children:[b?Object(d.jsx)(h,{column:x,onChooseColumn:function(){C(),x!==s&&n({id:u,newColumn:x,column:s})},onSetColumn:function(e){v(e.target.value)},closeSelect:C}):Object(d.jsx)(f,{onClickOpenSelect:function(){O(!0)}}),Object(d.jsx)("img",{height:"100px",width:"auto",src:c,alt:"card's cover"}),Object(d.jsx)("h5",{children:a}),Object(d.jsx)("p",{children:o})]})},x=n(25),v=n.n(x),C=[{id:"todo",columnName:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c",cards:[]},{id:"inprogress",columnName:"\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435",cards:[]},{id:"done",columnName:"\u0421\u0434\u0435\u043b\u0430\u043d\u043e",cards:[]}],g={id:null,name:"",description:"",url:"",column:""};var k=n(9),w="tracker",L=function e(t){var n,c,r=(n=1,c=5e3,Math.floor(Math.random()*(c-n)+n));if(!t.includes(r))return r;e(t)},y=n(26),S=n.n(y),N=function(){return Object(d.jsx)("div",{className:"loader",children:Object(d.jsx)(S.a,{type:"Oval",color:"#000",height:30,width:30})})},I=function(e){var t=e.columnId,n=e.addCard,c=e.setShowCardForm,a=e.tracker,o=Object(r.useState)(g),s=Object(i.a)(o,2),l=s[0],j=s[1],O=function(){var e=L(a.reduce((function(e,t){return[].concat(Object(k.a)(e),[t.cards.map((function(e){return e.id}))])}),[]).flat());try{v.a.get("https://jsonplaceholder.typicode.com/photos/"+e).then((function(e){j(Object(u.a)(Object(u.a)({},l),{},{id:e.data.id,url:e.data.url,column:t}))}))}catch(n){throw new Error(n)}},m=function(e){e.target.classList.contains("new-card")&&e.target.reset(),j(g),c(!1)};Object(r.useEffect)((function(){O()}),[]);var f,h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=Object(r.useRef)();function a(){c.current&&(clearTimeout(c.current),c.current=null)}return Object(r.useEffect)((function(){return n?a:null}),[n]),function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];a(),c.current=setTimeout((function(){return e.apply(void 0,r)}),t)}}(O,200),p=Object(r.useRef)(null);return(f=p.current)&&f.addEventListener("input",(function e(){f.value.trim().length?f.setCustomValidity(""):f.setCustomValidity("\u041f\u043e\u043b\u0435 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u043e\u0431\u0435\u043b\u044b"),f.reportValidity(),f.removeEventListener("input",e)})),Object(d.jsxs)("form",{className:"new-card",onSubmit:function(e){e.preventDefault(),n({columnId:t,newCard:l}),m(e)},autoComplete:"off",children:[Object(d.jsx)(b,{onClick:h,text:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),l.url?Object(d.jsx)("img",{src:l.url,alt:"cards cover"}):Object(d.jsx)(N,{}),Object(d.jsx)("input",{ref:p,value:l.name,onChange:function(e){return j(Object(u.a)(Object(u.a)({},l),{},{name:e.target.value}))},minLength:"1",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0}),Object(d.jsx)("textarea",{value:l.description,onChange:function(e){return j(Object(u.a)(Object(u.a)({},l),{},{description:e.target.value}))},type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(d.jsxs)("div",{className:"new-card_buttons",children:[Object(d.jsx)(b,{type:"submit",text:"\u041e\u043a"}),Object(d.jsx)(b,{onClick:m,text:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})},E="ADD_CARD",V="MOVE_CARD",A=function(e){return function(t){t({type:E,payload:e})}},D=function(e){return function(t){t({type:V,payload:e})}},R=function(e){var t=e.column,n=e.tracker,a=Object(s.b)(),o=Object(m.bindActionCreators)(c,a),u=o.moveCard,l=o.addCard,j=Object(r.useState)(!1),O=Object(i.a)(j,2),f=O[0],h=O[1],x=t.columnName,v=t.cards,C=t.id;return Object(d.jsxs)("section",{className:"column",children:[Object(d.jsx)("h3",{className:"column_name",children:x}),Object(d.jsxs)("div",{className:"cards_wrapper",children:[v.map((function(e){return Object(d.jsx)(p,{moveCard:u,card:e},e.id)})),f?Object(d.jsx)(I,{addCard:l,columnId:C,tracker:n,setShowCardForm:h}):Object(d.jsx)(b,{onClick:function(){h(!0)},text:"+ \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"})]})]})},_=function(e){var t=e.tracker;return Object(d.jsx)("main",{className:"wrapper",children:t.map((function(e){return Object(d.jsx)(R,{column:e,tracker:t},e.id)}))})},M=function(e){var t=e.text,n=e.btn,c=e.onClick;return Object(d.jsx)("section",{onClick:function(e){"module-wrapper"===e.target.className&&c()},className:"module-wrapper",children:Object(d.jsxs)("div",{className:"module",children:[Object(d.jsx)("h5",{children:t}),Object(d.jsx)(b,{onClick:c,text:n})]})})},T=function(e){var t=e.setIsSaveChanges;return Object(d.jsx)(M,{text:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b",btn:"\u041e\u043a",onClick:function(){return t(!1)}})};var H=function(){var e=Object(s.c)((function(e){return e})),t=function(e,t){var n=Object(r.useState)(!1),c=Object(i.a)(n,2),a=c[0],o=c[1];return[a,o,function(){localStorage.setItem(e,JSON.stringify(t)),o(!0)}]}(w,e),n=Object(i.a)(t,3),c=n[0],a=n[1],o=n[2];return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(O,{saveChanges:o}),Object(d.jsx)(_,{tracker:e}),c&&Object(d.jsx)(T,{setIsSaveChanges:a})]})},J=n(27),B=n(28),F=function(e){return localStorage.getItem(w)?JSON.parse(localStorage.getItem(w)):e}(C),q=Object(m.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:var n=t.payload,c=n.columnId,r=n.newCard;return e.map((function(e){return e.id===c&&(e.cards=[r].concat(Object(k.a)(e.cards))),e}));case V:var a,o=t.payload,i=o.id,s=o.newColumn,l=o.column;return e.forEach((function(e){e.id===l&&(a=e.cards.find((function(e){return e.id===i})),a=Object(u.a)(Object(u.a)({},a),{},{column:s}))})),e.map((function(e){return e.id===l&&(e.cards=e.cards.filter((function(e){return e.id!==i}))),e.id===s&&(e.cards=[a].concat(Object(k.a)(e.cards))),e}));default:return e}}),F,Object(J.composeWithDevTools)(Object(m.applyMiddleware)(B.a)));o.a.render(Object(d.jsx)(s.a,{store:q,children:Object(d.jsx)(H,{})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.ff014691.chunk.js.map